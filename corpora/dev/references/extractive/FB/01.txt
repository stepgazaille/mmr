Shares slumped by 6.7% after a whistleblower revealed a vast data breach that affected tens of millions of people.